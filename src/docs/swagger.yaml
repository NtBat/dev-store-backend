openapi: 3.0.0
info:
    title: DevStore API
    version: 1.0.0
    description: API documentation for DevStore backend
    contact:
        name: DevStore Team

servers:
    - url: http://localhost:3333
      description: Development server
    - url: http://localhost:4000
      description: Alternative development server

tags:
    - name: Health
      description: Health check endpoints
    - name: Banners
      description: Banner management
    - name: Products
      description: Product management and catalog
    - name: Categories
      description: Category management and metadata
    - name: Cart
      description: Shopping cart operations
    - name: Users
      description: User authentication and management
    - name: Favorites
      description: User favorites management
    - name: Orders
      description: Order management and history
    - name: Store
      description: Store information and settings
    - name: Admin
      description: Administrative endpoints (requires admin role)
    - name: Webhooks
      description: External service webhooks (not for direct use)

paths:
    /ping:
        get:
            summary: Health check endpoint
            description: Returns a pong response to verify the API is running
            tags:
                - Health
            responses:
                '200':
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    pong:
                                        type: boolean
                                        example: true

    /banners:
        get:
            summary: Get all banners
            description: Retrieves all active banners with absolute image URLs
            tags:
                - Banners
            responses:
                '200':
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BannersResponse'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /products:
        get:
            summary: Get all products
            description: Retrieves products with filtering, sorting, and limit options. Supports filtering by metadata (e.g., technology tags) using pipe-separated values.
            tags:
                - Products
            parameters:
                - in: query
                  name: metadata
                  schema:
                      type: string
                  description: |
                      JSON string with metadata filters. Format: `{"categoryMetadataId": "value1|value2|value3"}`.
                      Example: `{"tech": "react|node"}` filters products with React OR Node tags.
                  example: '{"tech":"react|node"}'
                - in: query
                  name: orderBy
                  schema:
                      type: string
                      enum:
                          - views
                          - selling
                          - price
                  description: |
                      Sort products by:
                      - `views` - Most viewed (default)
                      - `selling` - Best selling
                      - `price` - Lowest price first
                  example: views
                - in: query
                  name: limit
                  schema:
                      type: string
                      pattern: '^\d+$'
                  description: Maximum number of products to return
                  example: '10'
            responses:
                '200':
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ProductsResponse'
                '400':
                    description: Invalid query parameters
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /products/{id}:
        get:
            summary: Get product by ID
            description: Retrieves detailed information about a specific product including all images, description, and category. Also increments the product view count.
            tags:
                - Products
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: string
                      pattern: '^\d+$'
                  description: Product unique identifier
                  example: '1'
            responses:
                '200':
                    description: Successful response with product details
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ProductDetailResponse'
                '400':
                    description: Invalid product ID
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '404':
                    description: Product not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Product not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /products/{id}/related:
        get:
            summary: Get related products
            description: Retrieves products from the same category as the specified product, excluding the product itself. Results are ordered by view count (most viewed first). Default limit is 4 products.
            tags:
                - Products
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: string
                      pattern: '^\d+$'
                  description: Product unique identifier to find related products
                  example: '1'
                - in: query
                  name: limit
                  schema:
                      type: string
                      pattern: '^\d+$'
                  description: Maximum number of related products to return (default is 4)
                  example: '4'
            responses:
                '200':
                    description: Successful response with related products
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ProductsResponse'
                '400':
                    description: Invalid product ID or limit parameter
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '404':
                    description: Product not found or no related products available
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Products not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /category/{slug}/metadata:
        get:
            summary: Get category with metadata
            description: Retrieves a category by its slug along with all associated metadata (filters) and their possible values. Useful for building dynamic filter interfaces.
            tags:
                - Categories
            parameters:
                - in: path
                  name: slug
                  required: true
                  schema:
                      type: string
                  description: Category URL slug
                  example: 'camisas'
            responses:
                '200':
                    description: Successful response with category and metadata
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CategoryMetadataResponse'
                '400':
                    description: Invalid slug parameter
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '404':
                    description: Category not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Category not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /admin/categories:
        get:
            summary: Get all categories
            description: Retrieves all categories with product count. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            responses:
                '200':
                    description: Categories retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/CategoryAdmin'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
        post:
            summary: Create category
            description: Creates a new category. Slug must be unique. Requires admin authentication. nameEn is optional for English translation.
            tags:
                - Admin
            security:
                - BearerAuth: []
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - name
                                - slug
                            properties:
                                name:
                                    type: string
                                    description: Category display name in Portuguese
                                    example: Camisas
                                nameEn:
                                    type: string
                                    description: Category display name in English (optional)
                                    example: Shirts
                                slug:
                                    type: string
                                    description: Category URL slug (must be unique)
                                    example: camisas
            responses:
                '201':
                    description: Category created successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Category'
                '400':
                    description: Invalid request or slug already exists
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Category with this slug already exists
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /admin/categories/{id}:
        put:
            summary: Update category
            description: Updates an existing category. If updating slug, it must remain unique. Requires admin authentication. nameEn can be updated to change English translation.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: Category ID
                  example: 1
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                name:
                                    type: string
                                    description: Category display name in Portuguese (optional)
                                    example: Camisetas
                                nameEn:
                                    type: string
                                    description: Category display name in English (optional)
                                    example: T-Shirts
                                slug:
                                    type: string
                                    description: Category URL slug (optional)
                                    example: camisetas
            responses:
                '200':
                    description: Category updated successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Category'
                '400':
                    description: Slug already exists
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Category with this slug already exists
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
        delete:
            summary: Delete category
            description: Deletes a category. Cannot delete if category has products. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: Category ID
                  example: 1
            responses:
                '200':
                    description: Category deleted successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    success:
                                        type: boolean
                                        example: true
                '400':
                    description: Cannot delete category with products or category not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Cannot delete category with products
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /admin/categories/{categoryId}/metadata:
        post:
            summary: Create category metadata
            description: Creates a new metadata field (filter) for a category. ID must be unique. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: categoryId
                  required: true
                  schema:
                      type: integer
                  description: Category ID
                  example: 1
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - id
                                - name
                            properties:
                                id:
                                    type: string
                                    description: Metadata unique identifier (e.g., 'size', 'color')
                                    example: size
                                name:
                                    type: string
                                    description: Metadata display name
                                    example: Tamanho
            responses:
                '201':
                    description: Metadata created successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CategoryMetadataItem'
                '400':
                    description: Invalid request or metadata id already exists
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Metadata with this id already exists
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /admin/categories/metadata/{id}:
        put:
            summary: Update category metadata
            description: Updates an existing category metadata field. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: string
                  description: Metadata ID
                  example: size
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - name
                            properties:
                                name:
                                    type: string
                                    description: Metadata display name
                                    example: Tamanhos Disponíveis
            responses:
                '200':
                    description: Metadata updated successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CategoryMetadataItem'
                '400':
                    description: Invalid request
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
        delete:
            summary: Delete category metadata
            description: Deletes a category metadata field and all its values. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: string
                  description: Metadata ID
                  example: size
            responses:
                '200':
                    description: Metadata deleted successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    success:
                                        type: boolean
                                        example: true
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /admin/categories/metadata/{metadataId}/values:
        post:
            summary: Create metadata value
            description: Creates a new value for a metadata field. ID must be unique. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: metadataId
                  required: true
                  schema:
                      type: string
                  description: Metadata ID
                  example: size
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - id
                                - label
                            properties:
                                id:
                                    type: string
                                    description: Value unique identifier (e.g., 'small', 'medium')
                                    example: medium
                                label:
                                    type: string
                                    description: Value display label
                                    example: M
            responses:
                '201':
                    description: Value created successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/MetadataValueItem'
                '400':
                    description: Invalid request or value id already exists
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Metadata value with this id already exists
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /admin/categories/metadata/values/{id}:
        put:
            summary: Update metadata value
            description: Updates an existing metadata value. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: string
                  description: Value ID
                  example: medium
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - label
                            properties:
                                label:
                                    type: string
                                    description: Value display label
                                    example: Médio
            responses:
                '200':
                    description: Value updated successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/MetadataValueItem'
                '400':
                    description: Invalid request
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
        delete:
            summary: Delete metadata value
            description: Deletes a metadata value. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: string
                  description: Value ID
                  example: medium
            responses:
                '200':
                    description: Value deleted successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    success:
                                        type: boolean
                                        example: true
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /cart/mount:
        post:
            summary: Mount shopping cart
            description: Retrieves product details for a list of product IDs. Used to mount/validate a shopping cart with current product information (price, availability, etc.). Does not persist cart data in the database.
            tags:
                - Cart
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - ids
                            properties:
                                ids:
                                    type: array
                                    items:
                                        type: string
                                        pattern: '^\d+$'
                                    description: Array of product IDs (as strings)
                                    example: ['1', '2', '3']
                                    minItems: 0
            responses:
                '200':
                    description: Successful response with cart products
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CartResponse'
                '400':
                    description: Invalid request body (missing ids or invalid format)
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Invalid request body
                '404':
                    description: Cart not found (unlikely, but possible in edge cases)
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Cart not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /cart/shipping:
        get:
            summary: Calculate shipping cost
            description: Calculates shipping cost and estimated delivery time based on zipcode. Currently returns mock data (cost=10, days=3) - shipping logic to be implemented.
            tags:
                - Cart
            parameters:
                - in: query
                  name: zipcode
                  required: true
                  schema:
                      type: string
                      minLength: 8
                      maxLength: 8
                  description: Brazilian zipcode (CEP) with 8 digits (no formatting)
                  example: '01310100'
            responses:
                '200':
                    description: Successful response with shipping information
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ShippingResponse'
                '400':
                    description: Invalid zipcode format (must be 8 digits)
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Invalid query parameters
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /cart/finish:
        post:
            summary: Finish cart and create order
            description: |
                Finalizes the shopping cart by creating an order and generating a Stripe payment link. 
                Requires authentication. This endpoint:
                1. Validates the cart items and address
                2. Creates an order in the database with shipping information
                3. Generates a Stripe Checkout session
                4. Returns the payment URL
            tags:
                - Cart
            security:
                - BearerAuth: []
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - cart
                                - addressId
                            properties:
                                cart:
                                    type: array
                                    items:
                                        type: object
                                        required:
                                            - productId
                                            - quantity
                                        properties:
                                            productId:
                                                type: integer
                                                minimum: 1
                                                description: Product unique identifier
                                                example: 1
                                            quantity:
                                                type: integer
                                                minimum: 1
                                                description: Quantity of this product
                                                example: 2
                                    minItems: 1
                                    description: Array of cart items with product IDs and quantities
                                    example:
                                        - productId: 1
                                          quantity: 2
                                        - productId: 3
                                          quantity: 1
                                addressId:
                                    type: integer
                                    minimum: 1
                                    description: User address ID for shipping (must belong to authenticated user)
                                    example: 1
            responses:
                '201':
                    description: Order created successfully, payment link returned
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/FinishCartResponse'
                '400':
                    description: Invalid request body (missing or invalid cart/addressId)
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Invalid request body
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Unauthorized
                '404':
                    description: Address not found or doesn't belong to user
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Address not found
                '500':
                    description: Failed to create order or payment link
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to create order

    /webhook/stripe:
        post:
            summary: Stripe webhook endpoint
            description: |
                **⚠️ FOR REFERENCE ONLY - NOT FOR DIRECT USE**

                This endpoint is called automatically by Stripe when payment events occur.
                It should be configured in your Stripe Dashboard under Webhooks.

                **DO NOT call this endpoint manually** - it requires a valid Stripe signature.

                Supported events:
                - `checkout.session.completed` → Updates order status to 'paid'
                - `checkout.session.async_payment_succeeded` → Updates order status to 'paid'
                - `checkout.session.expired` → Updates order status to 'cancelled'
                - `checkout.session.async_payment_failed` → Updates order status to 'cancelled'
                - `payment_intent.payment_failed` → Updates order status to 'cancelled'
            tags:
                - Webhooks
            parameters:
                - in: header
                  name: stripe-signature
                  required: true
                  schema:
                      type: string
                  description: Stripe signature for webhook verification (automatically sent by Stripe)
            requestBody:
                required: true
                description: Stripe event payload (automatically sent by Stripe)
                content:
                    application/json:
                        schema:
                            type: object
                            description: Stripe event object (format defined by Stripe)
            responses:
                '200':
                    description: Webhook processed successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                '400':
                    description: Invalid signature or missing required data
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Missing Stripe signature

    /user/register:
        post:
            summary: Register new user
            description: Creates a new user account with name, email, and password. Email must be unique. Password is hashed with bcrypt before storage.
            tags:
                - Users
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - name
                                - email
                                - password
                            properties:
                                name:
                                    type: string
                                    minLength: 3
                                    description: User's full name (minimum 3 characters)
                                    example: João Silva
                                email:
                                    type: string
                                    format: email
                                    minLength: 10
                                    description: User's email address (must be valid and unique)
                                    example: joao.silva@example.com
                                password:
                                    type: string
                                    minLength: 8
                                    format: password
                                    description: User's password (minimum 8 characters, will be hashed)
                                    example: senha123456
            responses:
                '201':
                    description: User created successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/UserResponse'
                '400':
                    description: Invalid request body or user already exists
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: User already exists
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /user/login:
        post:
            summary: User login
            description: Authenticates a user with email and password. Returns a UUID token that is stored in the database and can be used for authenticated requests.
            tags:
                - Users
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - email
                                - password
                            properties:
                                email:
                                    type: string
                                    format: email
                                    minLength: 6
                                    description: User's registered email address
                                    example: joao.silva@example.com
                                password:
                                    type: string
                                    minLength: 8
                                    format: password
                                    description: User's password (minimum 8 characters)
                                    example: senha123456
            responses:
                '200':
                    description: Login successful, token returned
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/LoginResponse'
                '400':
                    description: Invalid request body
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Invalid request body
                '401':
                    description: Invalid credentials (email or password incorrect)
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Invalid email or password
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

    /user/addresses:
        post:
            summary: Add user address
            description: Creates a new address for the authenticated user. Requires authentication token in the Authorization header.
            tags:
                - Users
            security:
                - BearerAuth: []
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - zipcode
                                - street
                                - number
                                - city
                                - state
                                - country
                            properties:
                                zipcode:
                                    type: string
                                    minLength: 8
                                    description: Address zipcode/postal code (minimum 8 characters)
                                    example: '01310100'
                                street:
                                    type: string
                                    minLength: 3
                                    description: Street name (minimum 3 characters)
                                    example: Av. Paulista
                                number:
                                    type: string
                                    minLength: 1
                                    description: Street number
                                    example: '1000'
                                city:
                                    type: string
                                    minLength: 3
                                    description: City name (minimum 3 characters)
                                    example: São Paulo
                                state:
                                    type: string
                                    minLength: 2
                                    description: State/Province (minimum 2 characters)
                                    example: SP
                                country:
                                    type: string
                                    minLength: 2
                                    description: Country (minimum 2 characters)
                                    example: BR
                                complement:
                                    type: string
                                    description: Additional address information (optional)
                                    example: Apto 101
            responses:
                '201':
                    description: Address created successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AddressResponse'
                '400':
                    description: Invalid request body
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Invalid request body
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Unauthorized
                '500':
                    description: Internal server error or failed to create address
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to create user address
        get:
            summary: Get user addresses
            description: Retrieves all addresses for the authenticated user, ordered by creation date (newest first). Requires authentication token in the Authorization header.
            tags:
                - Users
            security:
                - BearerAuth: []
            responses:
                '200':
                    description: Addresses retrieved successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AddressesListResponse'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Unauthorized
                '500':
                    description: Internal server error or failed to get addresses
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get user addresses

    /user/favorites:
        post:
            summary: Add product to favorites
            description: Adds a product to the authenticated user's favorites list. Requires authentication token.
            tags:
                - Favorites
            security:
                - BearerAuth: []
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - productId
                            properties:
                                productId:
                                    type: integer
                                    description: Product ID to add to favorites
                                    example: 1
            responses:
                '200':
                    description: Product added to favorites successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    message:
                                        type: string
                                        example: Product added to favorites
                '400':
                    description: Bad request - Missing productId
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: productId is required
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to add to favorites
        get:
            summary: Get user favorites
            description: Retrieves all products in the authenticated user's favorites list, ordered by creation date (newest first).
            tags:
                - Favorites
            security:
                - BearerAuth: []
            responses:
                '200':
                    description: Favorites retrieved successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/FavoritesResponse'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get favorites

    /user/favorites/{productId}:
        delete:
            summary: Remove product from favorites
            description: Removes a product from the authenticated user's favorites list. Requires authentication token.
            tags:
                - Favorites
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: productId
                  required: true
                  schema:
                      type: integer
                  description: Product ID to remove from favorites
                  example: 1
            responses:
                '200':
                    description: Product removed from favorites successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    message:
                                        type: string
                                        example: Product removed from favorites
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to remove from favorites

    /user/orders:
        get:
            summary: Get user orders
            description: Retrieves all orders for the authenticated user, ordered by creation date (newest first). Returns order ID, status, total price, and creation date.
            tags:
                - Orders
            security:
                - BearerAuth: []
            responses:
                '200':
                    description: Orders retrieved successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/OrdersListResponse'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Unauthorized
                '500':
                    description: Internal server error or failed to get orders
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get orders

    /store:
        get:
            summary: Get store information
            description: Retrieves store information including topbar text, social media links, and store benefits/features. This is a public endpoint that doesn't require authentication.
            tags:
                - Store
            responses:
                '200':
                    description: Store information retrieved successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/StoreResponse'
                '500':
                    description: Internal server error or failed to get store info
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get store info

    /admin/store:
        put:
            summary: Update store information
            description: Updates store information including topbar text and social media links. Requires admin authentication. All fields are optional - only provided fields will be updated.
            tags:
                - Admin
            security:
                - BearerAuth: []
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                topbarText:
                                    type: string
                                    description: Text to display in the topbar in Portuguese (optional)
                                    example: 🎉 Black Friday! Até 50% de desconto + Frete Grátis
                                topbarTextEn:
                                    type: string
                                    description: Text to display in the topbar in English (optional)
                                    example: 🎉 Black Friday! Up to 50% off + Free Shipping
                                instagram:
                                    type: string
                                    format: uri
                                    description: Instagram profile URL (optional)
                                    example: https://instagram.com/devstore
                                facebook:
                                    type: string
                                    format: uri
                                    description: Facebook page URL (optional)
                                    example: https://facebook.com/devstore
                                email:
                                    type: string
                                    format: email
                                    description: Store contact email (optional)
                                    example: contato@devstore.com
                                whatsapp:
                                    type: string
                                    format: uri
                                    description: WhatsApp contact link (optional)
                                    example: https://wa.me/5511987654321
                                copyright:
                                    type: string
                                    description: Copyright text in Portuguese (optional)
                                    example: © 2026 DevStore. Todos os direitos reservados.
                                copyrightEn:
                                    type: string
                                    description: Copyright text in English (optional)
                                    example: © 2026 DevStore. All rights reserved.
            responses:
                '200':
                    description: Store information updated successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/StoreInfoResponse'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Unauthorized
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error or failed to update store info
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to update store info

    /admin/store/benefits:
        post:
            summary: Create store benefit
            description: Creates a new store benefit/feature to be displayed on the store. Requires admin authentication. Benefits are used to highlight store advantages (e.g., free shipping, 24/7 support).
            tags:
                - Admin
            security:
                - BearerAuth: []
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - iconName
                                - title
                                - description
                            properties:
                                iconName:
                                    type: string
                                    description: Icon name from lucide-react library (e.g., 'truck', 'shield-check', 'headphones')
                                    example: gift
                                title:
                                    type: string
                                    description: Benefit title in Portuguese
                                    example: Embalagem para presente
                                titleEn:
                                    type: string
                                    description: Benefit title in English (optional)
                                    example: Gift wrapping
                                description:
                                    type: string
                                    description: Benefit description in Portuguese
                                    example: Embalagem gratuita para todos os pedidos
                                descriptionEn:
                                    type: string
                                    description: Benefit description in English (optional)
                                    example: Free gift wrapping for all orders
                                order:
                                    type: integer
                                    description: Display order (optional, defaults to 0)
                                    example: 5
            responses:
                '200':
                    description: Benefit created successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/StoreBenefit'
                '400':
                    description: Invalid request body - missing required fields
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: iconName, title and description are required
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Unauthorized
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error or failed to create benefit
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to create store benefit

    /admin/store/benefits/{id}:
        put:
            summary: Update store benefit
            description: Updates an existing store benefit. Requires admin authentication. All fields are optional - only provided fields will be updated.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: Benefit unique identifier
                  example: 1
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                iconName:
                                    type: string
                                    description: Icon name from lucide-react library (optional)
                                    example: truck
                                title:
                                    type: string
                                    description: Benefit title in Portuguese (optional)
                                    example: Frete grátis
                                titleEn:
                                    type: string
                                    description: Benefit title in English (optional)
                                    example: Free shipping
                                description:
                                    type: string
                                    description: Benefit description in Portuguese (optional)
                                    example: Frete grátis em pedidos acima de R$ 299
                                descriptionEn:
                                    type: string
                                    description: Benefit description in English (optional)
                                    example: Free shipping on orders over $299
                                order:
                                    type: integer
                                    description: Display order (optional)
                                    example: 1
            responses:
                '200':
                    description: Benefit updated successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/StoreBenefit'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Unauthorized
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error or failed to update benefit
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to update store benefit
        delete:
            summary: Delete store benefit
            description: Deletes a store benefit by ID. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: Benefit unique identifier
                  example: 5
            responses:
                '200':
                    description: Benefit deleted successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    success:
                                        type: boolean
                                        example: true
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Unauthorized
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error or failed to delete benefit
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to delete store benefit

    /admin/favorites:
        get:
            summary: Get all favorites grouped by product
            description: Retrieves all favorites grouped by product with user details. Shows which products are most favorited and by which users. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            responses:
                '200':
                    description: Favorites retrieved successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AdminFavoritesResponse'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get all favorites

    /admin/users:
        get:
            summary: Get all users
            description: Retrieves a paginated list of all users with filtering options. Shows basic user data and counts for orders, addresses, and favorites. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: query
                  name: page
                  schema:
                      type: integer
                      default: 1
                  description: Page number for pagination
                  example: 1
                - in: query
                  name: limit
                  schema:
                      type: integer
                      default: 20
                  description: Number of items per page
                  example: 20
                - in: query
                  name: search
                  schema:
                      type: string
                  description: Search by name or email (case-insensitive)
                  example: john
                - in: query
                  name: role
                  schema:
                      type: string
                      enum: [customer, admin]
                  description: Filter by user role
                  example: customer
            responses:
                '200':
                    description: Users retrieved successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/UsersListResponse'
                '400':
                    description: Invalid query parameters
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get users

    /admin/users/stats:
        get:
            summary: Get users statistics
            description: Retrieves general statistics about users including total count, new users this month, and active users (with orders). Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            responses:
                '200':
                    description: Statistics retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    stats:
                                        type: object
                                        properties:
                                            total:
                                                type: integer
                                                description: Total number of users
                                                example: 150
                                            newThisMonth:
                                                type: integer
                                                description: New users registered this month
                                                example: 12
                                            activeUsers:
                                                type: integer
                                                description: Users who have placed at least one order
                                                example: 89
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get users stats

    /admin/users/{id}:
        get:
            summary: Get user details
            description: Retrieves complete details for a specific user including addresses, orders, favorites, and statistics. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: User ID
                  example: 1
            responses:
                '200':
                    description: User details retrieved successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/UserDetailResponse'
                '400':
                    description: Invalid user ID
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '404':
                    description: User not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: User not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get user
        put:
            summary: Update user
            description: Updates user information (name and/or email). All fields are optional. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: User ID
                  example: 1
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                name:
                                    type: string
                                    description: User name (optional)
                                    example: John Doe Updated
                                email:
                                    type: string
                                    format: email
                                    description: User email (optional)
                                    example: john.updated@example.com
            responses:
                '200':
                    description: User updated successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    user:
                                        $ref: '#/components/schemas/UserBasic'
                '400':
                    description: Invalid request data or email already exists
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Email already exists
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '404':
                    description: User not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: User not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to update user
        delete:
            summary: Delete user
            description: Deletes a user from the system. This action cannot be undone. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: User ID
                  example: 1
            responses:
                '200':
                    description: User deleted successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    message:
                                        type: string
                                        example: User deleted successfully
                '400':
                    description: Invalid user ID
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '404':
                    description: User not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: User not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to delete user

    /admin/users/{id}/role:
        put:
            summary: Update user role
            description: Changes a user's role between customer and admin. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: User ID
                  example: 1
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - role
                            properties:
                                role:
                                    type: string
                                    enum: [customer, admin]
                                    description: New role for the user
                                    example: admin
            responses:
                '200':
                    description: User role updated successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    user:
                                        $ref: '#/components/schemas/UserBasic'
                '400':
                    description: Invalid request data
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '404':
                    description: User not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: User not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to update user role

    /admin/banners:
        get:
            summary: Get all banners
            description: Retrieves all banners ordered by the order field. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            responses:
                '200':
                    description: Banners retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    banners:
                                        type: array
                                        items:
                                            $ref: '#/components/schemas/BannerAdmin'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get banners
        post:
            summary: Create banner
            description: Creates a new banner. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - img
                                - link
                            properties:
                                img:
                                    type: string
                                    description: Banner image filename
                                    example: banner-promo.png
                                link:
                                    type: string
                                    description: Link URL when banner is clicked
                                    example: /products/react
                                order:
                                    type: integer
                                    description: Display order (optional, defaults to 0)
                                    example: 0
            responses:
                '200':
                    description: Banner created successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    banner:
                                        $ref: '#/components/schemas/BannerAdmin'
                '400':
                    description: Invalid request data
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to create banner

    /admin/banners/{id}:
        get:
            summary: Get banner by ID
            description: Retrieves a specific banner by ID. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: Banner ID
                  example: 1
            responses:
                '200':
                    description: Banner retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    banner:
                                        $ref: '#/components/schemas/BannerAdmin'
                '400':
                    description: Invalid banner ID
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '404':
                    description: Banner not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Banner not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to get banner
        put:
            summary: Update banner
            description: Updates an existing banner. All fields are optional. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: Banner ID
                  example: 1
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                img:
                                    type: string
                                    description: Banner image filename (optional)
                                    example: banner-promo-updated.png
                                link:
                                    type: string
                                    description: Link URL when banner is clicked (optional)
                                    example: /products/vue
                                order:
                                    type: integer
                                    description: Display order (optional)
                                    example: 1
            responses:
                '200':
                    description: Banner updated successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    banner:
                                        $ref: '#/components/schemas/BannerAdmin'
                '400':
                    description: Invalid request data
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '404':
                    description: Banner not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Banner not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to update banner
        delete:
            summary: Delete banner
            description: Deletes a banner from the system. This action cannot be undone. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            parameters:
                - in: path
                  name: id
                  required: true
                  schema:
                      type: integer
                  description: Banner ID
                  example: 1
            responses:
                '200':
                    description: Banner deleted successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    message:
                                        type: string
                                        example: Banner deleted successfully
                '400':
                    description: Invalid banner ID
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '404':
                    description: Banner not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Banner not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to delete banner

    /admin/banners/reorder:
        put:
            summary: Reorder banners
            description: Updates the display order of multiple banners in a single request. Requires admin authentication.
            tags:
                - Admin
            security:
                - BearerAuth: []
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - banners
                            properties:
                                banners:
                                    type: array
                                    description: Array of banner IDs with their new order
                                    items:
                                        type: object
                                        required:
                                            - id
                                            - order
                                        properties:
                                            id:
                                                type: integer
                                                description: Banner ID
                                                example: 1
                                            order:
                                                type: integer
                                                description: New display order
                                                example: 0
                                    example:
                                        - id: 1
                                          order: 0
                                        - id: 2
                                          order: 1
                                        - id: 3
                                          order: 2
            responses:
                '200':
                    description: Banners reordered successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        nullable: true
                                        example: null
                                    message:
                                        type: string
                                        example: Banners reordered successfully
                '400':
                    description: Invalid request data
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '401':
                    description: Unauthorized - Invalid or missing token
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                '403':
                    description: Forbidden - User is not an admin
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Access denied. Admin only.
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        example: Failed to reorder banners

components:
    schemas:
        Error:
            type: object
            properties:
                error:
                    type: string
                    description: Error message

        Banner:
            type: object
            properties:
                img:
                    type: string
                    description: Banner image URL
                    example: http://localhost:3333/media/banners/banner-1.png
                link:
                    type: string
                    description: Banner redirect link
                    example: /products/category

        BannersResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                banners:
                    type: array
                    items:
                        $ref: '#/components/schemas/Banner'

        Product:
            type: object
            properties:
                id:
                    type: integer
                    description: Product unique identifier
                    example: 1
                label:
                    type: string
                    description: Product name in Portuguese (default)
                    example: Camisa React
                labelEn:
                    type: string
                    nullable: true
                    description: Product name in English (optional)
                    example: React Shirt
                price:
                    type: number
                    format: float
                    description: Product price
                    example: 94.5
                image:
                    type: string
                    nullable: true
                    description: Product image URL (first image)
                    example: http://localhost:3333/media/products/camiseta-react-azul.png
                liked:
                    type: boolean
                    description: Whether the product is liked by the user (TODO - always false for now)
                    example: false

        ProductsResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                products:
                    type: array
                    items:
                        $ref: '#/components/schemas/Product'

        ProductDetail:
            type: object
            properties:
                id:
                    type: integer
                    description: Product unique identifier
                    example: 1
                label:
                    type: string
                    description: Product name in Portuguese (default)
                    example: Camisa React
                labelEn:
                    type: string
                    nullable: true
                    description: Product name in English (optional)
                    example: React Shirt
                price:
                    type: number
                    format: float
                    description: Product price
                    example: 94.5
                description:
                    type: string
                    nullable: true
                    description: Detailed product description in Portuguese
                    example: Camisa com logo do React, ideal para front-end developers
                descriptionEn:
                    type: string
                    nullable: true
                    description: Detailed product description in English (optional)
                    example: React logo shirt, ideal for front-end developers
                categoryId:
                    type: integer
                    description: Category ID reference
                    example: 1
                images:
                    type: array
                    items:
                        type: string
                    description: Array of product image URLs
                    example:
                        - http://localhost:3333/media/products/camiseta-react-azul.png
                        - http://localhost:3333/media/products/camiseta-react-preta.png

        Category:
            type: object
            properties:
                id:
                    type: integer
                    description: Category unique identifier
                    example: 1
                name:
                    type: string
                    description: Category name in Portuguese (default)
                    example: Camisas
                nameEn:
                    type: string
                    nullable: true
                    description: Category name in English (optional)
                    example: Shirts
                slug:
                    type: string
                    description: Category URL slug
                    example: camisas

        CategoryAdmin:
            type: object
            properties:
                id:
                    type: integer
                    description: Category unique identifier
                    example: 1
                name:
                    type: string
                    description: Category name in Portuguese (default)
                    example: Camisas
                nameEn:
                    type: string
                    nullable: true
                    description: Category name in English (optional)
                    example: Shirts
                slug:
                    type: string
                    description: Category URL slug
                    example: camisas
                createdAt:
                    type: string
                    format: date-time
                    description: Category creation timestamp
                updatedAt:
                    type: string
                    format: date-time
                    description: Category last update timestamp
                _count:
                    type: object
                    properties:
                        products:
                            type: integer
                            description: Number of products in this category
                            example: 5

        CategoryMetadataItem:
            type: object
            properties:
                id:
                    type: string
                    description: Metadata unique identifier
                    example: tech
                name:
                    type: string
                    description: Metadata display name
                    example: Tecnologia
                categoryId:
                    type: integer
                    description: Category ID this metadata belongs to
                    example: 1
                createdAt:
                    type: string
                    format: date-time
                    description: Metadata creation timestamp
                updatedAt:
                    type: string
                    format: date-time
                    description: Metadata last update timestamp

        MetadataValueItem:
            type: object
            properties:
                id:
                    type: string
                    description: Value unique identifier
                    example: react
                label:
                    type: string
                    description: Value display label
                    example: React
                categoryMetadataId:
                    type: string
                    description: Metadata ID this value belongs to
                    example: tech
                createdAt:
                    type: string
                    format: date-time
                    description: Value creation timestamp
                updatedAt:
                    type: string
                    format: date-time
                    description: Value last update timestamp

        ProductDetailResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                product:
                    $ref: '#/components/schemas/ProductDetail'
                category:
                    $ref: '#/components/schemas/Category'

        MetadataValue:
            type: object
            properties:
                id:
                    type: string
                    description: Metadata value unique identifier
                    example: react
                label:
                    type: string
                    description: Human-readable label
                    example: React

        CategoryMetadata:
            type: object
            properties:
                id:
                    type: string
                    description: Category metadata unique identifier
                    example: tech
                name:
                    type: string
                    description: Metadata field name
                    example: Tecnologia
                values:
                    type: array
                    items:
                        $ref: '#/components/schemas/MetadataValue'
                    description: Available values for this metadata field

        CategoryMetadataResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                category:
                    $ref: '#/components/schemas/Category'
                metadata:
                    type: array
                    items:
                        $ref: '#/components/schemas/CategoryMetadata'
                    description: Array of metadata fields with their possible values

        CartProduct:
            type: object
            properties:
                id:
                    type: integer
                    description: Product unique identifier
                    example: 1
                label:
                    type: string
                    description: Product name in Portuguese (default)
                    example: Camisa React
                labelEn:
                    type: string
                    nullable: true
                    description: Product name in English (optional)
                    example: React Shirt
                price:
                    type: number
                    format: float
                    description: Current product price
                    example: 94.5
                image:
                    type: string
                    nullable: true
                    description: Product image URL (first image)
                    example: http://localhost:3333/media/products/camiseta-react-azul.png

        CartResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                cart:
                    type: array
                    items:
                        $ref: '#/components/schemas/CartProduct'
                    description: Array of products in the cart with current information

        ShippingResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                zipcode:
                    type: string
                    description: The zipcode used for calculation
                    example: '01310100'
                cost:
                    type: number
                    format: float
                    description: Shipping cost in currency
                    example: 10
                days:
                    type: integer
                    description: Estimated delivery time in days
                    example: 3

        User:
            type: object
            properties:
                id:
                    type: integer
                    description: User unique identifier
                    example: 1
                name:
                    type: string
                    description: User's full name
                    example: João Silva
                email:
                    type: string
                    format: email
                    description: User's email address
                    example: joao.silva@example.com

        UserResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                user:
                    $ref: '#/components/schemas/User'

        LoginResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                token:
                    type: string
                    format: uuid
                    description: Authentication token (UUID v4) stored in database
                    example: 550e8400-e29b-41d4-a716-446655440000

        Address:
            type: object
            properties:
                id:
                    type: integer
                    description: Address unique identifier
                    example: 1
                userId:
                    type: integer
                    description: User ID owner of this address
                    example: 1
                zipcode:
                    type: string
                    description: Address zipcode/postal code
                    example: '01310100'
                street:
                    type: string
                    description: Street name
                    example: Av. Paulista
                number:
                    type: string
                    description: Street number
                    example: '1000'
                city:
                    type: string
                    description: City name
                    example: São Paulo
                state:
                    type: string
                    description: State/Province
                    example: SP
                country:
                    type: string
                    description: Country
                    example: BR
                complement:
                    type: string
                    nullable: true
                    description: Additional address information
                    example: Apto 101
                createdAt:
                    type: string
                    format: date-time
                    description: Address creation timestamp
                updatedAt:
                    type: string
                    format: date-time
                    description: Address last update timestamp

        AddressResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                address:
                    $ref: '#/components/schemas/Address'

        AddressesListResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                addresses:
                    type: array
                    items:
                        $ref: '#/components/schemas/Address'
                    description: List of user addresses ordered by creation date (newest first)

        FinishCartResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                url:
                    type: string
                    format: uri
                    description: Stripe Checkout session URL for payment
                    example: https://checkout.stripe.com/pay/cs_test_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0

        Order:
            type: object
            properties:
                id:
                    type: integer
                    description: Order unique identifier
                    example: 1
                status:
                    type: string
                    enum:
                        - pending
                        - paid
                        - cancelled
                    description: Order payment status
                    example: paid
                total:
                    type: number
                    format: float
                    description: Order total amount (including shipping)
                    example: 209.8
                createdAt:
                    type: string
                    format: date-time
                    description: Order creation timestamp
                    example: '2024-01-22T12:00:00.000Z'

        OrdersListResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                orders:
                    type: array
                    items:
                        $ref: '#/components/schemas/Order'
                    description: List of user orders ordered by creation date (newest first)

        StoreBenefit:
            type: object
            properties:
                id:
                    type: integer
                    description: Benefit unique identifier
                    example: 1
                storeId:
                    type: integer
                    description: Store ID this benefit belongs to
                    example: 1
                iconName:
                    type: string
                    description: Icon name from lucide-react library
                    example: truck
                title:
                    type: string
                    description: Benefit title in Portuguese (default)
                    example: Frete grátis
                titleEn:
                    type: string
                    nullable: true
                    description: Benefit title in English (optional)
                    example: Free shipping
                description:
                    type: string
                    description: Benefit description in Portuguese (default)
                    example: Frete grátis em pedidos acima de R$ 299
                descriptionEn:
                    type: string
                    nullable: true
                    description: Benefit description in English (optional)
                    example: Free shipping on orders over $299
                order:
                    type: integer
                    description: Display order
                    example: 1
                createdAt:
                    type: string
                    format: date-time
                    description: Benefit creation timestamp
                updatedAt:
                    type: string
                    format: date-time
                    description: Benefit last update timestamp

        StoreInfo:
            type: object
            properties:
                id:
                    type: integer
                    description: Store unique identifier
                    example: 1
                topbarText:
                    type: string
                    nullable: true
                    description: Text to display in the topbar in Portuguese
                    example: Frete grátis para compras acima de R$ 299
                topbarTextEn:
                    type: string
                    nullable: true
                    description: Text to display in the topbar in English (optional)
                    example: Free shipping on orders over $299
                instagram:
                    type: string
                    nullable: true
                    format: uri
                    description: Instagram profile URL
                    example: https://instagram.com/devstore
                facebook:
                    type: string
                    nullable: true
                    format: uri
                    description: Facebook page URL
                    example: https://facebook.com/devstore
                email:
                    type: string
                    nullable: true
                    format: email
                    description: Store contact email
                    example: contato@devstore.com
                whatsapp:
                    type: string
                    nullable: true
                    format: uri
                    description: WhatsApp contact link
                    example: https://wa.me/5511987654321
                copyright:
                    type: string
                    nullable: true
                    description: Copyright text in Portuguese
                    example: © 2026 DevStore. Todos os direitos reservados.
                copyrightEn:
                    type: string
                    nullable: true
                    description: Copyright text in English (optional)
                    example: © 2026 DevStore. All rights reserved.
                createdAt:
                    type: string
                    format: date-time
                    description: Store creation timestamp
                updatedAt:
                    type: string
                    format: date-time
                    description: Store last update timestamp

        StoreResponse:
            type: object
            properties:
                id:
                    type: integer
                    description: Store unique identifier
                    example: 1
                topbarText:
                    type: string
                    nullable: true
                    description: Text to display in the topbar in Portuguese
                    example: Frete grátis para compras acima de R$ 299
                topbarTextEn:
                    type: string
                    nullable: true
                    description: Text to display in the topbar in English (optional)
                    example: Free shipping on orders over $299
                instagram:
                    type: string
                    nullable: true
                    format: uri
                    description: Instagram profile URL
                    example: https://instagram.com/devstore
                facebook:
                    type: string
                    nullable: true
                    format: uri
                    description: Facebook page URL
                    example: https://facebook.com/devstore
                email:
                    type: string
                    nullable: true
                    format: email
                    description: Store contact email
                    example: contato@devstore.com
                whatsapp:
                    type: string
                    nullable: true
                    format: uri
                    description: WhatsApp contact link
                    example: https://wa.me/5511987654321
                copyright:
                    type: string
                    nullable: true
                    description: Copyright text in Portuguese
                    example: © 2026 DevStore. Todos os direitos reservados.
                copyrightEn:
                    type: string
                    nullable: true
                    description: Copyright text in English (optional)
                    example: © 2026 DevStore. All rights reserved.
                createdAt:
                    type: string
                    format: date-time
                    description: Store creation timestamp
                updatedAt:
                    type: string
                    format: date-time
                    description: Store last update timestamp
                features:
                    type: array
                    items:
                        $ref: '#/components/schemas/StoreBenefit'
                    description: List of store benefits/features ordered by order field

        StoreInfoResponse:
            type: object
            properties:
                id:
                    type: integer
                    description: Store unique identifier
                    example: 1
                topbarText:
                    type: string
                    nullable: true
                    description: Text to display in the topbar in Portuguese
                    example: 🎉 Black Friday! Até 50% de desconto + Frete Grátis
                topbarTextEn:
                    type: string
                    nullable: true
                    description: Text to display in the topbar in English (optional)
                    example: 🎉 Black Friday! Up to 50% off + Free Shipping
                instagram:
                    type: string
                    nullable: true
                    format: uri
                    description: Instagram profile URL
                    example: https://instagram.com/devstore
                facebook:
                    type: string
                    nullable: true
                    format: uri
                    description: Facebook page URL
                    example: https://facebook.com/devstore
                email:
                    type: string
                    nullable: true
                    format: email
                    description: Store contact email
                    example: contato@devstore.com.br
                whatsapp:
                    type: string
                    nullable: true
                    format: uri
                    description: WhatsApp contact link
                    example: https://wa.me/5511987654321
                copyright:
                    type: string
                    nullable: true
                    description: Copyright text in Portuguese
                    example: © 2026 DevStore. Todos os direitos reservados.
                copyrightEn:
                    type: string
                    nullable: true
                    description: Copyright text in English (optional)
                    example: © 2026 DevStore. All rights reserved.
                createdAt:
                    type: string
                    format: date-time
                    description: Store creation timestamp
                updatedAt:
                    type: string
                    format: date-time
                    description: Store last update timestamp

        FavoriteProduct:
            type: object
            properties:
                id:
                    type: integer
                    description: Product ID
                    example: 1
                label:
                    type: string
                    description: Product name in Portuguese
                    example: Camisa React
                labelEn:
                    type: string
                    nullable: true
                    description: Product name in English (optional)
                    example: React Shirt
                price:
                    type: number
                    format: float
                    description: Product price
                    example: 94.5
                image:
                    type: string
                    nullable: true
                    description: Product image URL (first image)
                    example: http://localhost:3333/media/products/camiseta-react-azul.png

        FavoriteItem:
            type: object
            properties:
                id:
                    type: integer
                    description: Favorite record ID
                    example: 1
                productId:
                    type: integer
                    description: Product ID
                    example: 1
                createdAt:
                    type: string
                    format: date-time
                    description: When the product was added to favorites
                    example: '2026-02-02T15:30:00.000Z'
                product:
                    $ref: '#/components/schemas/FavoriteProduct'

        FavoritesResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                favorites:
                    type: array
                    items:
                        $ref: '#/components/schemas/FavoriteItem'
                    description: List of favorited products

        FavoriteUser:
            type: object
            properties:
                id:
                    type: integer
                    description: User ID
                    example: 1
                name:
                    type: string
                    description: User name
                    example: John Doe
                email:
                    type: string
                    format: email
                    description: User email
                    example: john@example.com

        AdminFavoriteItem:
            type: object
            properties:
                product:
                    $ref: '#/components/schemas/FavoriteProduct'
                count:
                    type: integer
                    description: Number of users who favorited this product
                    example: 3
                users:
                    type: array
                    items:
                        $ref: '#/components/schemas/FavoriteUser'
                    description: List of users who favorited this product

        AdminFavoritesResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                favorites:
                    type: array
                    items:
                        $ref: '#/components/schemas/AdminFavoriteItem'
                    description: List of products grouped by favorites with user details

        UserBasic:
            type: object
            properties:
                id:
                    type: integer
                    description: User unique identifier
                    example: 1
                name:
                    type: string
                    description: User name
                    example: John Doe
                email:
                    type: string
                    format: email
                    description: User email
                    example: john@example.com
                role:
                    type: string
                    enum: [customer, admin]
                    description: User role
                    example: customer
                createdAt:
                    type: string
                    format: date-time
                    description: User creation timestamp
                    example: '2026-01-15T10:30:00.000Z'
                updatedAt:
                    type: string
                    format: date-time
                    description: User last update timestamp
                    example: '2026-02-01T14:20:00.000Z'

        UserListItem:
            type: object
            properties:
                id:
                    type: integer
                    description: User unique identifier
                    example: 1
                name:
                    type: string
                    description: User name
                    example: John Doe
                email:
                    type: string
                    format: email
                    description: User email
                    example: john@example.com
                role:
                    type: string
                    enum: [customer, admin]
                    description: User role
                    example: customer
                createdAt:
                    type: string
                    format: date-time
                    description: User creation timestamp
                    example: '2026-01-15T10:30:00.000Z'
                _count:
                    type: object
                    properties:
                        orders:
                            type: integer
                            description: Number of orders
                            example: 5
                        addresses:
                            type: integer
                            description: Number of addresses
                            example: 2
                        favorites:
                            type: integer
                            description: Number of favorited products
                            example: 3

        UsersListResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                users:
                    type: array
                    items:
                        $ref: '#/components/schemas/UserListItem'
                pagination:
                    type: object
                    properties:
                        page:
                            type: integer
                            description: Current page number
                            example: 1
                        limit:
                            type: integer
                            description: Items per page
                            example: 20
                        total:
                            type: integer
                            description: Total number of users
                            example: 150
                        totalPages:
                            type: integer
                            description: Total number of pages
                            example: 8

        UserOrderItem:
            type: object
            properties:
                id:
                    type: integer
                    description: Order ID
                    example: 1
                status:
                    type: string
                    description: Order status
                    example: paid
                total:
                    type: number
                    format: float
                    description: Order total amount
                    example: 209.8
                createdAt:
                    type: string
                    format: date-time
                    description: Order creation timestamp
                    example: '2026-01-20T15:30:00.000Z'

        UserFavoriteItem:
            type: object
            properties:
                id:
                    type: integer
                    description: Favorite record ID
                    example: 1
                productId:
                    type: integer
                    description: Product ID
                    example: 1
                product:
                    type: object
                    properties:
                        id:
                            type: integer
                            example: 1
                        label:
                            type: string
                            example: Camisa React
                        labelEn:
                            type: string
                            nullable: true
                            example: React Shirt
                        price:
                            type: number
                            format: float
                            example: 94.5

        UserDetailResponse:
            type: object
            properties:
                error:
                    type: string
                    nullable: true
                    description: Error message (null if success)
                user:
                    type: object
                    properties:
                        id:
                            type: integer
                            description: User unique identifier
                            example: 1
                        name:
                            type: string
                            description: User name
                            example: John Doe
                        email:
                            type: string
                            format: email
                            description: User email
                            example: john@example.com
                        role:
                            type: string
                            enum: [customer, admin]
                            description: User role
                            example: customer
                        createdAt:
                            type: string
                            format: date-time
                            description: User creation timestamp
                            example: '2026-01-15T10:30:00.000Z'
                        updatedAt:
                            type: string
                            format: date-time
                            description: User last update timestamp
                            example: '2026-02-01T14:20:00.000Z'
                        addresses:
                            type: array
                            items:
                                $ref: '#/components/schemas/Address'
                            description: User addresses
                        orders:
                            type: array
                            items:
                                $ref: '#/components/schemas/UserOrderItem'
                            description: User orders (newest first)
                        favorites:
                            type: array
                            items:
                                $ref: '#/components/schemas/UserFavoriteItem'
                            description: User favorite products
                        stats:
                            type: object
                            properties:
                                totalOrders:
                                    type: integer
                                    description: Total number of orders
                                    example: 5
                                totalSpent:
                                    type: number
                                    format: float
                                    description: Total amount spent in paid orders
                                    example: 1049.0
                                lastOrderDate:
                                    type: string
                                    format: date-time
                                    nullable: true
                                    description: Date of last order
                                    example: '2026-01-20T15:30:00.000Z'

    BannerAdmin:
        type: object
        properties:
            id:
                type: integer
                description: Banner unique identifier
                example: 1
            img:
                type: string
                description: Banner image filename
                example: banner-1.png
            link:
                type: string
                description: Link URL when banner is clicked
                example: /products/react
            order:
                type: integer
                description: Display order
                example: 0
            createdAt:
                type: string
                format: date-time
                description: Banner creation timestamp
                example: '2026-01-15T10:30:00.000Z'
            updatedAt:
                type: string
                format: date-time
                description: Banner last update timestamp
                example: '2026-02-01T14:20:00.000Z'

    securitySchemes:
        BearerAuth:
            type: http
            scheme: bearer
            bearerFormat: UUID
            description: Authentication token obtained from /user/login endpoint
